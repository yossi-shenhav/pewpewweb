<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pew Pew Scanner - Komodosec</title>
    <style>
        body {
            background-color: #292b2c;
            color: #ffffff;
            font-family: 'Arial', sans-serif;
            margin: 20px;
        }

        h1 {
            color: #5cb85c;
        }

        div {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            border: 1px solid #5cb85c;
            border-radius: 4px;
            background-color: #3a3f44;
        }

        pre {
            white-space: pre-wrap;
        }
    </style>
        <script>
                // Example usage:
        const scanDataSample = {
            "host_name": "example.com",
            "scan_type": "full_scan",
            "openports": {
                "port_1": true,
                "port_2": true,
                "port_3": true
            }
        };

	scData = {{ insetedJson | safe }};

        
    function jsonToHtml1(scanData) {
        let html = '<table border="1">';
        html += '<tr><th style="width: 150px;">Name</th><th style="width: 150px;">Scan Type</th></tr>';

        // Add a row for the scan data
        html += '<tr><td>Host Name:</td><td>' + scanData.host_name + '</td></tr>';
        html += '<tr><td>Scan Type:</td><td>' + scanData.scan_type + '</td></tr>';

        // Iterate over the open ports and add them to the table
        Object.keys(scanData.openports).forEach(port => {
            html += '<tr><td>Open Port</td><td>' + port + ' (open)</td></tr>';
        });
        html += '</table>';

        return html;
    }
    
    function jsonToHtml(scanData) {
    // Create table element
    let table = document.createElement('table');
    table.setAttribute('border', '1');

    // Create table header row
    let headerRow = document.createElement('tr');
    let nameHeader = document.createElement('th');
    nameHeader.textContent = 'Name';
    nameHeader.style.width = '150px';
    let scanTypeHeader = document.createElement('th');
    scanTypeHeader.textContent = 'Scan Type';
    scanTypeHeader.style.width = '150px';
    headerRow.appendChild(nameHeader);
    headerRow.appendChild(scanTypeHeader);
    table.appendChild(headerRow);

    // Add a row for the scan data
    let scanDataRow = document.createElement('tr');
    let hostNameCell = document.createElement('td');
    hostNameCell.textContent = 'Host Name:';
    let hostNameValueCell = document.createElement('td');
    hostNameValueCell.textContent = scanData.host_name;
    scanDataRow.appendChild(hostNameCell);
    scanDataRow.appendChild(hostNameValueCell);
    table.appendChild(scanDataRow);

    let scanTypeRow = document.createElement('tr');
    let scanTypeCell = document.createElement('td');
    scanTypeCell.textContent = 'Scan Type:';
    let scanTypeValueCell = document.createElement('td');
    scanTypeValueCell.textContent = scanData.scan_type;
    scanTypeRow.appendChild(scanTypeCell);
    scanTypeRow.appendChild(scanTypeValueCell);
    table.appendChild(scanTypeRow);

    // Iterate over the open ports and add them to the table
    Object.keys(scanData.openports).forEach(port => {
        let portRow = document.createElement('tr');
        let portCell = document.createElement('td');
        portCell.textContent = 'Open Port';
        let portValueCell = document.createElement('td');
        portValueCell.textContent = port + ' (open)';
        portRow.appendChild(portCell);
        portRow.appendChild(portValueCell);
        table.appendChild(portRow);
    });

    return table;
}

    
    
    
    function buildTables(){
    	let htmlTable = jsonToHtml(scData);
    	//console.log(htmlTable); // Print the generated HTML table  
    	document.getElementById("scanresults").appendChild(htmlTable);
    	}
    </script>
</head>
<body onload="buildTables()">
    <div>
        <h1>Results</h1>
        <div id="scanresults"></div>
    </div>
</body>
</html>

